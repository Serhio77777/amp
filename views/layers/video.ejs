<%
function getVideoUrl (content) {
  let url = content.value
  if (!url) {
    url = content.video
  }
  // TODO change to https
  if (/http:\/\//.test(url) || /https:\/\//.test(url)) {
    // const httpsUrl = url.slice(0, 4) + 's' + url.slice(4)
    // console.log('httpsUrlhttpsUrlhttpsUrlhttpsUrl', httpsUrl)
    return url
  } else {
    return `//localhost:3978${url}#t=0,10`
  }
}
if (layer.settings.layerSettings.fullscreen) {%>
  <amp-video
          class="full-screen-video"
          autoplay
  <% if (layer.settings.layerSettings.mute) {%>
          noaudio
          <% } %>
          layout="responsive"
          src="<%= getVideoUrl(layer.content)%>"
          width="<%= layer.settings.layerSettings.width %>"
          height="<%= layer.settings.layerSettings.height %>"
          poster="<%= layer.content.thumbnail || layer.content.image ? layer.content.image.url : '' %>"
          style="height: inherit;opacity:<%= layer.settings.generalSettings.opacity / 100 %>">
  </amp-video>
<% } else { %>
  <amp-video
          autoplay
  <% if (layer.settings.layerSettings.mute) { %>
          noaudio
          <% } %>
          style="width: 100%;
                  height: 100%;
                  box-shadow:0px 0px <%= layer.settings.generalSettings.shadow %>px 0px rgba(0,0,0,0.75);
                  opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
          width="<%= layer.settings.layerSettings.width %>"
          height="<%= layer.settings.layerSettings.height %>"
          poster="<%= layer.content.thumbnail || layer.content.image ? layer.content.image.url : '' %>"
          layout="responsive"
          src="<%= getVideoUrl(layer.content)%>"
  >
  </amp-video>
<% } %>
