<% function getStyles (settings) {
  let styles = ''
  if (settings) {
    if (settings.margin && !layer.settings.layerSettings.fullscreen) {
      if (['1', '3', '13', '15', '2', '5', '11', '14'].includes(settings.position)) {
        if (['1', '2', '3', '5'].includes(settings.position)) {
          styles += `top:${settings.margin}px;`;
        } else if (['11', '13', '14', '15'].includes(settings.position)) {
          styles += `top:${-settings.margin}px;`;
        }
      }
      if (['1', '4', '7', '10', '13'].includes(settings.position)) {
        styles += `left:${settings.margin}px;`;
      }
      if (['3', '6', '9', '12', '15'].includes(settings.position)) {
        styles += `right:${settings.margin}px;`;
      }
    }
    if (settings.opacity) {
      styles += `opacity:${settings.opacity / 100};`
    }
    styles += `z-index: ${layer.position}`
  }
  return styles
}

function getImageUrl (content) {
  console.log('content', content)
  if (layer.type === 'video') {
    if (content.thumbnail !== '') {
      console.log('thumbnail')
      return content.thumbnail || content.image.thumbnail
    } else if (content.image.thumbnail) {
      return content.image.thumbnail || ''
    } else {
      return ''
    }
  } else {
    return (content.value || content.image) || ''
  }
}
if (layer.settings.layerSettings.fullscreen) { %>
  <amp-img
          src="<%= getImageUrl(layer.content) %>"
          width="<%= layer.settings.layerSettings.originalWidth %>px"
          height="<%= layer.settings.layerSettings.originalHeight %>px"
          class=""
          layout="responsive"
          alt="an image"
          style="width:100%;height:100%;object-fit:fill;position: static;opacity: <%=layer.settings.generalSettings.opacity / 100 %>;">
  </amp-img>
<% } else { %>
  <amp-img
          class="small-image"
          src="<%= getImageUrl(layer.content) %>"
          width="<%= layer.settings.layerSettings.width %>"
          height="<%= layer.settings.layerSettings.height %>"
          layout="responsive"
          alt="an image"
  <% if (layer.settings.generalSettings.shadow !== '0') { %>
          style="
                  filter: drop-shadow(0px 0px <%= layer.settings.generalSettings.shadow %>px rgba(0,0,0,0.75));
                  position: initial;
                  opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
          <% } else { %>
          style="position: initial;opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
          <% } %>
  ></amp-img>
<% } %>
